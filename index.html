<!DOCTYPE html>
<html>
<head>
    <script src="https://res.cdn.office.net/teams-js/2.0.0/js/MicrosoftTeams.min.js"></script>
</head>
<body>
    <h1 id="training-title">Keepnet Training</h1>
    <p>Keepnet olarak senin iÃ§in bir eÄŸitim hazÄ±rladÄ±k.</p>
    
    <a id="training-button" href="#" class="btn">ðŸŽ¯ EÄŸitime Git</a>
    <a id="training-button2" href="#" class="btn">ðŸŽ¯ EÄŸitime Git 2</a>

    <script>
        // Teams SDK baÅŸlatma
        microsoftTeams.app.initialize().then(() => {
            // Context'i al
            microsoftTeams.app.getContext().then((context) => {
                console.log('Teams context:', context);
                
                // subEntityId'den parametreleri oku
                if (context.page && context.page.subEntityId) {
                    try {
                        const params = JSON.parse(decodeURIComponent(context.page.subEntityId));
                        console.log('Parametreler:', params);
                        
                        // HTML'i gÃ¼ncelle
                        if (params.title) {
                            document.getElementById('training-title').textContent = params.title;
                        }
                        
                        if (params.trainingurl) {
                            const button1 = document.getElementById('training-button');
                            const button2 = document.getElementById('training-button2');
                            
                            button1.href = params.trainingurl;
                            button2.href = params.trainingurl;
                            
                            button1.onclick = () => window.open(params.trainingurl, '_blank');
                            button2.onclick = () => window.open(params.trainingurl, '_blank');
                        }
                    } catch (e) {
                        console.error('subEntityId parse hatasÄ±:', e);
                        // Fallback: URL parametrelerini dene
                        tryUrlParams();
                    }
                } else {
                    // Fallback: URL parametrelerini dene
                    tryUrlParams();
                }
            });
        });

        // Fallback: Normal URL parametreleri
        function tryUrlParams() {
            const urlParams = new URLSearchParams(window.location.search);
            const trainingUrl = urlParams.get('trainingurl');
            const title = urlParams.get('title');
            
            if (title) {
                document.getElementById('training-title').textContent = title;
            }
            if (trainingUrl) {
                document.getElementById('training-button').href = trainingUrl;
                document.getElementById('training-button2').href = trainingUrl;
            }
        }
    </script>
</body>
</html>